-- ATL helper functions for testing helper definition and invocation
-- This file tests context helpers and context-free helpers
module HelperFunctions;

-- Context-free helpers (global functions)
helper def : addNumbers(a : Integer, b : Integer) : Integer =
    a + b;

helper def : concatenateStrings(first : String, second : String) : String =
    first + ' ' + second;

helper def : isPositive(value : Integer) : Boolean =
    value > 0;

helper def : maxValue(a : Integer, b : Integer) : Integer =
    if a > b then a else b endif;

helper def : factorial(n : Integer) : Integer =
    if n <= 1 then
        1
    else
        n * factorial(n - 1)
    endif;

-- Context helpers for String type
helper context String def : isEmpty() : Boolean =
    self.size() = 0;

helper context String def : reverse() : String =
    -- Simple placeholder implementation
    self + '_reversed';

helper context String def : toUpperCase() : String =
    -- Simple placeholder implementation
    self + '_UPPER';

-- Context helpers for Integer type
helper context Integer def : isEven() : Boolean =
    self.mod(2) = 0;

helper context Integer def : square() : Integer =
    self * self;

helper context Integer def : power(exponent : Integer) : Integer =
    if exponent = 0 then
        1
    else if exponent = 1 then
        self
    else
        self * self.power(exponent - 1)
    endif endif;

-- Test queries using helpers
query TestAddition = addNumbers(15, 25);

query TestConcatenation = concatenateStrings('Hello', 'World');

query TestFactorial = factorial(5);

query TestStringEmpty = ''.isEmpty();

query TestStringNotEmpty = 'test'.isEmpty();

query TestEvenNumber = 4.isEven();

query TestOddNumber = 7.isEven();

query TestSquare = 8.square();

query TestPower = 3.power(4);
